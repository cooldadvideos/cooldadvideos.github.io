<html>
<head>
  <title>Rain on Ganymede</title>
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
  <link rel="stylesheet" href="./Scripts/styles.css">
  
  <script>
  // runs when user clicks button
   AFRAME.registerComponent('start', {

    init: function()
  {
  // block pointer events until buttonEnter is clicked
  let uiDiv = document.getElementById("uiDiv");
  uiDiv.style["pointer-events"] = "auto";

  // set up background blocker
  uiDiv.style["background-color"] = "rgba(0, 0, 0, 0.75)";

  // indicate clickable with hand cursor (desktop)
  let buttonEnter = document.getElementById("buttonEnter");
  buttonEnter.style.cursor = "pointer";

  // fade-in functionality
  let fadeIn = function()
  {
    // allow point events again
    uiDiv.style["pointer-events"] = "none";

    // sounds can only be triggered after a mouse interaction
    let soundPlayer = document.querySelector("#ambientSound");
    soundPlayer.components.sound.playSound();

    // remove startButton
    buttonEnter.parentNode.remove(buttonEnter);

    // fade out uiDiv background
    uiDiv.style["background-color"] = "rgba(0, 0, 0, 0.0)";
      uiDiv.style["transition"] = "background-color 1000ms linear";
  }

  // activate for desktop/touchscreen
  buttonEnter.addEventListener('touchstart', fadeIn);
  buttonEnter.addEventListener('mousedown',  fadeIn);
}
});
</script>

</head>

<body>
        
      <div class="mainUI" id="uiDiv" oncontextmenu="return false;">
        <!-- centered -->
        <div class="regionUI">
          <div class="buttonUI">
            <img src="./Assets/enter.png" id="buttonEnter" />
          </div>
        </div>
      </div>

      <!-- noise overlay -->
      <!--div>
        <img class=overlay src="./Assets/noisetest.png" width=100% height=100%>
      </div-->
  
  <a-scene fog="type: linear; color: #e3f2c9; start: 0; end: 10;" start>
    <a-assets>
      <audio id="phobosroute" src="./Assets/phobosroute.mp3" preload="auto"></audio>
    </a-assets>

    <!--Vibes-->
    <a-entity id="ambientSound" sound="src: #phobosroute; loop: true; positional: false;"></a-entity>

     <!--Camera-->
     <a-entity camera look-controls wasd-controls="acceleration:10" position="0 10 0"></a-entity>
   
    <a-entity environment="preset: yavapai; shadow: true; skyColor: white; skyType: color; seed: 5; groundColor: #e3f2c9; groundColor2: #a2ad90; dressingAmount: 40;"></a-entity>
  </a-scene>
</body>
</html>